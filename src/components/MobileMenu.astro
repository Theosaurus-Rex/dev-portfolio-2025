---
// No props needed for navigation
---

<!-- Menu Overlay -->
<div
    id="mobile-menu"
    class="fixed inset-0 z-40 hidden"
    aria-hidden="true"
>
    <!-- Menu Panel -->
    <nav
        class="fixed right-0 top-0 h-full w-64 bg-cream border-l-4 border-black p-6 transform translate-x-full transition-transform duration-300"
        id="menu-panel"
    >
        <ul class="space-y-4 mt-16">
            <li>
                <a
                    href="/"
                    class="text-2xl font-bold hover:text-pink transition-colors"
                    >Home</a>
            </li>
            <li>
                <a
                    href="/blog"
                    class="text-2xl font-bold hover:text-blue transition-colors"
                    >Blog</a>
            </li>
            <li>
                <a
                    href="/talks"
                    class="text-2xl font-bold hover:text-orange transition-colors"
                    >Talks</a>
            </li>
            <li>
                <a
                    href="/projects"
                    class="text-2xl font-bold hover:text-purple transition-colors"
                    >Projects</a>
            </li>
        </ul>
    </nav>
</div>

<script is:inline>
    // Wait for DOM to be ready
    document.addEventListener('DOMContentLoaded', () => {
        const toggle = document.getElementById("menu-toggle");
        const menu = document.getElementById("mobile-menu");
        const panel = document.getElementById("menu-panel");
        const line1 = document.getElementById("line1");
        const line2 = document.getElementById("line2");
        const line3 = document.getElementById("line3");

        // Exit if elements don't exist
        if (!toggle || !menu || !panel || !line1 || !line2 || !line3) {
            return;
        }

        let isOpen = false;

        function openMenu() {
            isOpen = true;
            menu.classList.remove("hidden");
            panel.classList.remove("translate-x-full");
            toggle.setAttribute("aria-expanded", "true");
            menu.setAttribute("aria-hidden", "false");
            document.body.style.overflow = "hidden";

            // Animate hamburger to X
            line1.style.transform = "rotate(45deg) translateY(8px)";
            line2.style.opacity = "0";
            line3.style.transform = "rotate(-45deg) translateY(-8px)";
        }

        function closeMenu() {
            isOpen = false;
            panel.classList.add("translate-x-full");
            toggle.setAttribute("aria-expanded", "false");
            menu.setAttribute("aria-hidden", "true");
            document.body.style.overflow = "";

            // Reset hamburger
            line1.style.transform = "";
            line2.style.opacity = "";
            line3.style.transform = "";

            // Remove overlay after animation
            setTimeout(() => {
                if (!isOpen) menu.classList.add("hidden");
            }, 300);
        }

        // Toggle on button click
        toggle.addEventListener("click", () => {
            isOpen ? closeMenu() : openMenu();
        });

        // Close on overlay click
        menu.addEventListener("click", (e) => {
            if (e.target === menu) closeMenu();
        });

        // Close on escape key
        document.addEventListener("keydown", (e) => {
            if (e.key === "Escape" && isOpen) closeMenu();
        });

        // Close menu on navigation
        document.querySelectorAll("#menu-panel a").forEach((link) => {
            link.addEventListener("click", closeMenu);
        });
    });
</script>
