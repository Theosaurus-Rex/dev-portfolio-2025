---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import type { GetStaticPaths } from 'astro';

export const getStaticPaths = (async () => {
  const posts = await getCollection('blog');
  return posts.map(post => ({
    params: { slug: post.slug },
    props: { post },
  }));
}) satisfies GetStaticPaths;

const { post } = Astro.props;
const { Content } = await post.render();
const { title, description, date, imageUrl } = post.data;
---

<BaseLayout title={title} description={description}>
  <main class="min-h-screen">
    <!-- Hero Image -->
    <div class="w-full h-64 md:h-96 overflow-hidden">
      <img
        src={imageUrl}
        alt={title}
        class="w-full h-full object-cover"
      />
    </div>

    <!-- Post Content -->
    <article class="max-w-4xl mx-auto px-4 lg:px-8 py-12">
      <header class="mb-8">
        <h1 class="text-4xl md:text-6xl font-bold mb-4">{title}</h1>
        <time class="text-gray-600">{date}</time>
      </header>

      <div class="prose prose-lg max-w-none prose-headings:font-bold prose-a:text-blue hover:prose-a:text-pink">
        <Content />
      </div>

      <!-- Back to blog link -->
      <div class="mt-12">
        <a href="/blog" class="text-pink hover:text-blue font-bold">
          ‚Üê Back to Blog
        </a>
      </div>
    </article>
  </main>
</BaseLayout>
