---
import type { CollectionEntry } from 'astro:content';
import { Image } from 'astro:assets';
import tasklyImage from '@/assets/images/taskly.png';

interface Props {
  project: CollectionEntry<'projects'>;
}

const { project } = Astro.props;
const { name, description, imageSrc, githubUrl, liveUrl } = project.data;

// Map image paths to imported images
const imageMap: Record<string, any> = {
  '/images/taskly.png': tasklyImage,
};

const projectImage = imageMap[imageSrc] || tasklyImage;
---

<div class="relative isolate flex flex-col gap-8 lg:flex-row">
  <div class="relative aspect-16/9 sm:aspect-2/1 lg:aspect-square lg:w-64 lg:shrink-0">
    <Image
      src={projectImage}
      alt={name}
      widths={[256, 384, 512]}
      formats={['avif', 'webp', 'png']}
      loading="lazy"
      class="absolute inset-0 h-full w-full rounded-2xl bg-gray-50 object-cover"
    />
    <div class="absolute inset-0 rounded-2xl ring-1 ring-inset ring-gray-900/10"></div>
  </div>
  <div>
    <div class="group relative max-w-xl">
      <h2 class="mt-3 text-3xl font-semibold leading-6 text-gray-900">
        {name}
      </h2>
      <p class="mt-5 text-xl leading-6 text-gray-600">
        {description}
      </p>
      <div class="flex flex-row space-x-4 mt-4">
        {liveUrl && (
          <a
            href={liveUrl}
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center rounded-md bg-purple px-3 py-2 text-lg font-semibold text-white shadow-xs hover:bg-pink transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple border-2 border-black"
          >
            View Live
          </a>
        )}
        <a
          href={githubUrl}
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center rounded-md bg-purple px-3 py-2 text-lg font-semibold text-white shadow-xs hover:bg-pink transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple border-2 border-black"
        >
          View Code
        </a>
      </div>
    </div>
  </div>
</div>
