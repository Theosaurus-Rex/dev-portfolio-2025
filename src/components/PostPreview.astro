---
import type { CollectionEntry } from "astro:content";
import { Image } from "astro:assets";

interface Props {
    post: CollectionEntry<"blog">;
    index: number;
}

const { post, index } = Astro.props;
const { title, description, date, imageUrl } = post.data;

const bgColors = ["bg-blue", "bg-purple", "bg-pink", "bg-orange", "bg-lime"];
const bgColor = bgColors[index % bgColors.length];

// Format date
const formattedDate = new Date(date).toLocaleDateString("en-US", {
    year: "numeric",
    month: "long",
    day: "numeric",
});
---

<a href={`/blog/${post.slug}`} class="h-full block">
    <article
        class={`flex flex-col items-start ${bgColor} p-6 border-4 border-black rounded-md h-full`}
    >
        <Image
            src={imageUrl}
            alt=""
            inferSize={true}
            class="aspect-16/9 w-full object-cover grayscale sm:aspect-2/1 lg:aspect-3/2 rounded-md border-4 border-black"
            widths={[400, 800, 1200]}
            sizes="(max-width: 640px) 400px, (max-width: 1024px) 800px, 1200px"
        />

        <div class="max-w-xl">
            <div class="mt-8 flex items-center gap-x-4 text-sm">
                <time class="uppercase font-bold italic">
                    {formattedDate}
                </time>
            </div>
            <div class="group relative">
                <h2
                    class="mt-3 text-xl font-semibold leading-6 group-hover:underline"
                >
                    <span class="absolute inset-0"></span>
                    {title}
                </h2>
                <p class="mt-2 line-clamp-3 text-md leading-6">
                    {description}
                </p>
            </div>
        </div>
    </article>
</a>
